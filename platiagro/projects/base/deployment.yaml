apiVersion: apps/v1beta2
kind: Deployment
metadata:
  name: projects
spec:
  selector:
    matchLabels:
      app: projects
  template:
    metadata:
      labels:
        app: projects
    spec:
      containers:
      - name: projects
        env:
        - name: KF_PIPELINES_ENDPOINT
          value: ml-pipeline.kubeflow:8888
        - name: MINIO_ENDPOINT
          value: "minio-service.kubeflow:9000"
        - name: MINIO_ACCESS_KEY
          value: "minio"
        - name: MINIO_SECRET_KEY
          value: "minio123"
        - name: MYSQL_DB_HOST
          value: "mysql.platiagro"
        - name: MYSQL_DB_NAME
          value: "platiagro"
        - name: JUPYTER_ENDPOINT
          value: "http://server.anonymous:80/notebook/anonymous/server"
        - name: KF_PIPELINES_NAMESPACE
          value: anonymous
        - name: MEMORY_REQUEST
          value: 2G
        - name: CPU_REQUEST
          value: 100m
        - name: MEMORY_LIMIT
          value: 10G
        - name: CPU_LIMIT
          value: 2000m
        - name: DEFAULT_IMAGE
          value: $(task-default-image)
        image: docker.io/platiagro/projects:0.2.0-SNAPSHOT
        imagePullPolicy: IfNotPresent
        ports:
        - containerPort: 8080
        livenessProbe:
          httpGet:
            path: /
            port: 8080
          initialDelaySeconds: 30
          periodSeconds: 30
